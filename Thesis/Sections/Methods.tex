\section{Characterizing the CGT}
The objective is to determine the difference between the measured specific impulse and the theoretical values. To determine the experimental value for the specific impulse is a matter of measuring the force production of the nozzle and the change in mass of the system. This is done with the use of two force sensors. One measuring the change in mass of the $CO_2$ cylinder and the other measuring the force production of the nozzle. To determine the theoretical values for the same system requires measuring $T_c,\ T_e,\ P_c,\ and\ P_a$ where the ambient pressure is a constant and can be determined from the forecast that day. The same variables are needed for the predicted force equation. This information is coming from Equation \ref{eq:RelevantNozzleForce} and \ref{eq:RelevantIsp}. It is important that these variables are represented well by the data collected, however the experimental setup used in the data collection presented here does a poor job of this. The setup and methods will be presented here along with solutions to the problems faced. 
\subsection{On-Ground Testing Rig}
A simplified schematic of the experimental apparatus is shown in Figure \ref{fig:ApparatusSchem}.
\begin{figure}[h!]
\centering
\includegraphics[width=6.5in]{Figures/Apparatus}
\caption{Simplified on-ground testing rig}
\label{fig:ApparatusSchem}
\end{figure}
\subsubsection{Hardware}
All of the parts, except the $CO_2$ adaptor and pressure transducer were ordered from McMaster-Carr. The adaptor was custom machined and the transducer was purchased from a third party seller with no datasheet provided. However, the voltage output from it varied linearly with pressure and could be calibrated with a simple linear regression function. The solenoid is a 24V DC 3000psi solenoid valve, it was controlled by a simple digital signal run through a push pull (NPN-PNP pair) amplifier. Each temperature sensor was a Type K thermocouple, interfacing with a AD8495 breakout baord made by Adafruit. These breakoutboards interfaced with the data acquisition system via a 10-bit analog to digital converter. The force sensor used was a 1kg load cell interfacing with an HX711 (24-bit analog to digital converter) breakout board. To handle several different voltage levels, several linear regulators were used to provide a 12V, 5V, and 3.3V supplies. The solenoid, along with the regulators, was powered directly by the 24V lab bench power supply. The importance of having a current capable supply to handle all the relatively large power consumption is paramount. Without it data sensors provide erroneous values with massive errors \cite{voltage}. Additionally, a stable and low noise supply should be used. The solenoid measured a series resistance of $60\Omega$ and was connected directly to a 24V supply. This can cause shifting in the ground level if care is not taken to provide a very low resistance, low inductive path to ground. For more information regarding the schematics of this setup, see Appendix \ref{chap:Appendix}, section \ref{sec:Schematics}. The plumbing system used is 1/4" OD copper tubing with compression fittings that allowed adaptations between the copper pipe and the 1/8" National Pipe Threading (NPT) that was used for the non-pipe fittings. The choice of this plumbing system is the high pressure rating and relatively low weight. The most massive part of the system was the solenoid valve. One budgeting approximately 19\% the maximum allowed weight of the HABP. On final thought, a choice was made to omit the flow controller because the mass flow rate should be limited by the nozzle throat.\footnote{This assumption will be discussed further in Chapter \ref{chap:Discussion}} For sake of simplicity these devices are referred to as ``sensors'' preceded by the variable they measured. So $P_c$ sensor, $T_e$ sensor, $T_c$ sensor, and $F$ sensor. Additionally, $\gamma$ is dependent on temperature, but only changes slightly in the temperature differences noticed here. In later models, $\gamma$ will be set to be a function of temperature for greater accuracy. For now it is not necessary because the force has a small dependence on $\gamma$ compared to the temperature. A complete list of parts and schematics is available in Appendix \ref{chap:Appendix} section \ref{sec:PartsList}.
\subsubsection{Nozzle Manufacturing}
Several options were considered for the manufacturing of nozzles. These included the processes listed below:
\begin{itemize}
\item Fused deposition modeling (FDM) 3D printing
\item Resin 3D printing
\item Machining by hand
\item Modeling and casting by hand
\end{itemize}
However, in dealing with such small parts modelling and casting by hand was immediately discarded. Modelling differences of expansion ratios on the scale of parts of a millimeter was out of the question. Machining by hand is both costly in terms of money and time. Also, such small nozzles would present difficulties in the machining process. FDM 3D printing was by far the most accessible out of these, but there are problems related to both accuracy and actual function of the nozzles. FDM 3D printers typically use a .4mm nozzle. This limitation on accuracy is relatively large considering the nozzle throat is designed to by no larger than .625mm in diameter. Also, the .4mm nozzle refers to the actual size of the hole in the nozzle, \textit{not} the size of the filament extruded from the nozzle. FDM printers typically produce layer heights no smaller than .1mm. In addition to the problem of accuracy, the parts are relatively porous. The method of FDM printing calls for the extrusion of a hot filament onto a cooled layer of filament to produce a 3D model. This does well creating structural parts not dependent on high tolerances and do not need to be air-tight, but for a CGT nozzle it will not work well. Much of the fuel would be lost in the layers of the nozzle and the friction between the layers and exhaust gases would be more so than any of the other methods. This leaves resin printing, often referred to as stereo-lithography (SLA) printing. This method has been out of reach for many in years past, but recent manufacturers have developed robust, inexpensive resin printers. These printers can provide layer heights of .01mm and do not rely on laying lines of hot filament on top of other layers. Rather, they use two main methods of creating the part. The cheaper versions use a 5.5x3.5in UV LCD screen with resolutions of approximately 2560x1400 pixels. These resolutions are much finer than the FDM printer's capabilities. Additionally, these layers are formed by a chemical curing of one layer of resin to the previous. Given no impurities in the resin, this will provide an air-tight seal in the part. Figure \ref{fig:PressurePrint} shows a pressure test that was performed on a printed part\footnote{This part has been soaked in IPA to reveal interior details of the part}, similar to the designed nozzles.
\begin{figure}[h!]
\centering
\includegraphics[width=10cm]{Figures/PressurePrint}
\caption{Pressure test of resin print from the ELEGOO MARS 3D printer}
\label{fig:PressurePrint}
\end{figure}
The part was essentially an end cap, filled in increments of 20psi up to 400psi. It was held at 400psi for 6 hours and it held that pressure with no noticeable change in the needle on the guage throughout that time.\footnote{The o-ring may have been noticed, this is not a necessary part for typical NPT fittings, but was added to ensure a seal with the resin part.} Similar tests with FDM printed parts held no pressure, even after being treated with an epoxy coating. For comparing the accuracy of the parts, several prints were done. Figure \ref{fig:Rooks} displays an example of the difference in detail and Figure \ref{fig:RooksCompared} shows a close-up of the two at the same scale.\clearpage
\begin{figure}[h!]
\centering
\includegraphics[width=10cm]{Figures/RooksMarked}
\caption{Two 3D printed rooks for detail comparison. On left, resin and on right, FDM}
\label{fig:Rooks}
\end{figure}
\begin{figure*}[h!]
    \centering
    \begin{subfigure}[t]{0.5\textwidth}
        \centering
        \includegraphics[width=7.5cm]{Figures/RookClose}
        \caption{Resin printed rook closeup}
    \end{subfigure}%
    ~ 
    \begin{subfigure}[t]{0.5\textwidth}
        \centering
        \includegraphics[width=7.5cm]{Figures/FDMRookClose}
        \caption{FDM printed rook closeup}
    \end{subfigure}
    \caption{Rook closeups}
\label{fig:RooksCompared}
\end{figure*}
The layer height for the resin printed part was set to .05mm and the FDM is .25mm. The difference is easily noticed.\\
Nozzle design was done in two programs. First, the nozzle geometry was made in OpenSCAD. An open source program was used to set the parameters for the nozzle geometry. A .stl file was generated from OpenSCAD and imported into Blender. From here, the actual functional parts were added to the model like the hex flat-ends, NPT fitting, exterior walls, and labelling. Figure \ref{fig:BathingNozzles} shows several nozzles begin cleaned in isopropyl alcohol (IPA). The actual nozzle geometry can be seen while the part is covered in IPA.
\begin{figure}[h!]
\centering
\includegraphics[width=10cm]{Figures/BathingNozzles}
\caption{Several 3D printed nozzles bathing in IPA}
\label{fig:BathingNozzles}
\end{figure}
There were a total of 10 nozzle expansion ratios used with 2 trials each. The expansion ratio kept $A_t$ constant and varied $A_e$. There were 4 over expanded, 4 under-expanded, 1 optimum, and 1 with no expansion. The naming scheme goes something like ERT, where E stands for either U (Under-expanded), N (None), or O. O stands for either optimum or over-expanded. R is the ratio number (1-4) except in the case that there is no third character. In this case the O stands for optimum, which there is only one of. T stands for trial number which can be either 1 or 2. So for example, U22 is under-expanded, ratio number 2, trial number 2. O1 is optimum ratio, trial number 1. These are explicitly defined in the nomenclature section.%
\nomenclature{$O11$}{Over-expanded area ratio 1, trial 1}%
\nomenclature{$O12$}{Over-expanded area ratio 1, trial 2}%
\nomenclature{$O21$}{Over-expanded area ratio 2, trial 1}%
\nomenclature{$O22$}{Over-expanded area ratio 2, trial 2}%
\nomenclature{$O31$}{Over-expanded area ratio 3, trial 1}%
\nomenclature{$O32$}{Over-expanded area ratio 3, trial 2}%
\nomenclature{$O41$}{Over-expanded area ratio 4, trial 1}%
\nomenclature{$O42$}{Over-expanded area ratio 4, trial 2}%
\nomenclature{$U11$}{Under-expanded area ratio 1, trial 1}%
\nomenclature{$U12$}{Under-expanded area ratio 1, trial 2}%
\nomenclature{$U21$}{Under-expanded area ratio 2, trial 1}%
\nomenclature{$U22$}{Under-expanded area ratio 2, trial 2}%
\nomenclature{$U31$}{Under-expanded area ratio 3, trial 1}%
\nomenclature{$U32$}{Under-expanded area ratio 3, trial 2}%
\nomenclature{$U41$}{Under-expanded area ratio 4, trial 1}%
\nomenclature{$U42$}{Under-expanded area ratio 4, trial 2}%
\nomenclature{$O1$}{Optimum area ratio, trial 1}%
\nomenclature{$O2$}{Optimum area ratio, trial 2}%
\nomenclature{$N1$}{No expansion, trial 1}%
\nomenclature{$N2$}{No expansion, trial 2}
\subsubsection{Data Acquisition System}
The data acquisition system used here was a Raspberry Pi 3. The language used for scripting was Python. The project is hosted in a \href{https://github.com/maxmhuggins/RCS_HAB/tree/master/On_Ground_Testing/Code}{GitHub repository.}\footnote{Physical URL: \url{https://github.com/maxmhuggins/RCS_HAB/tree/master/On_Ground_Testing/Code}} There are two main scripting sections in the repository. The scripting for the on-ground testing rig was developed first. In this section there are classes for each of the data sensors. These allow for simple implementation of each of them in the main experiment file. Essentially, each of these sensors is defined as an object in the experiment file and this is the file which initiates each trial. This is a relatively straightforward file that allows for the calibration of sensors if need be. Calibration for the $P_c$ sensor is a simple linear regression plotting observed voltages against the known pressures. The slope for this line allowed a conversion betwen observed ADC voltages and pressure values. The force sensor calibration used a method of known masses. Known masses are added to the scale and the voltage values were measured. These values are averaged and the unit conversion is formed by the division of the read voltage and the known mass. This is done for each mass and the unit conversions are averaged. The Adafruit breakout boards for the thermocouples do not necessarily require calibration. However, in the datasheet \cite{thermocouple} there is a relevant section discussing error analysis and generally the devices are accurate to $\pm 2^oC$ and $\pm 1^oC$ initially. Major sources of error come from differences in the reference junction on the PCB. To ensure the thermocouples were reading similar values they were testing next to each other and a laser thermometer was used as a reference value. Both performed similarly. Most important to this project is that the thermocouples produced similar voltage values.\\
The analysis for the data was done under another section and is all object oriented. These scripts include an analyser class and a file for generating plots using the analyser class. All of the computation is completed in the analyser class and the figure generator is simply that, a figure generator. For ease of access the analyser and experiment Python files are displayed in Appendix \ref{chap:Appendix}, section \ref{sec:Scripting}.
\subsection{Data Collection Simplified}
The data taken was for the variables in Equation \ref{eq:RelevantNozzleForce}. The code began the experiment after all sensors were calibrated and functioning properly. Data collection ran until the force production was below a certain threshold for a predefined number of points.\footnote{This is discussed further in Chapter \ref{chap:Discussion}} After it was determined over the mass of the $CO_2$ canister was measured. All of this data was written to two separate .txt files. One included the calibration values for the sensors and changes in mass, the other included $P_c$, $T_c$, $T_e$, and $F$. The previous was not recorded in a useful format and later work had to be done to resolve this. In the future this should be updated. The latter was simply comma delimited and worked fine for reading into python for analysis. The data files can be found at this \href{https://github.com/maxmhuggins/RCS_HAB/tree/master/On_Ground_Testing/Data_and_Analysis/Experimental_Data_Analysis/Refined_Data_Files}{GitHub repository}\footnote{Physical URL: \url{https://github.com/maxmhuggins/RCS_HAB/tree/master/On_Ground_Testing/Data_and_Analysis/Experimental_Data_Analysis/Refined_Data_Files}} as well.